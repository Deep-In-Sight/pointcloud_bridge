syntax = "proto3";

package pointcloud;

message SensorPose {
  float px = 1;
  float py = 2;
  float pz = 3;
  float qx = 4;
  float qy = 5;
  float qz = 6;
  float qw = 7;
}

message PointCloudData {
  uint32 num_points = 1;
  bytes point_data = 2;       // interleaved x,y,z as float32 (12 bytes per point)
  uint64 timestamp = 3;
  uint32 sequence = 4;
}

message PoseData {
  SensorPose pose = 1;
  uint64 timestamp = 2;
}

// Combined message using oneof - client can check which field is set
message StreamMessage {
  oneof payload {
    PointCloudData points = 1;
    PoseData pose = 2;
  }
}
